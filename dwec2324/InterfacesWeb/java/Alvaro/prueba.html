<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Formulario de Registro</title>
<style>
  .error {
    color: red;
  }
</style>
</head>
<body>

<h2>Formulario de Registro</h2>

<form id="registroForm">
  <label for="nif">NIF:</label>
  <input type="text" id="nif" name="nif">

  <label for="fechaMatriculacion">Fecha de Matriculación:</label>
  <input type="date" id="fechaMatriculacion" name="fechaMatriculacion">

  <label for="cursoAcademico">Curso Académico:</label>
  <select id="cursoAcademico" name="cursoAcademico">
    <option value="20-21">20-21</option>
    <option value="21-22">21-22</option>
    <option value="22-23">22-23</option>
    <option value="23-24">23-24</option>
    <!-- Posibilidad para que el usuario añada nuevos cursos académicos -->
    <option value="otro">Otro</option>
  </select>

  <label>Asignaturas del DAW:</label>
  <input type="checkbox" name="asignatura" value="Programación">Programación
  <input type="checkbox" name="asignatura" value="Bases de Datos">Bases de Datos
  <input type="checkbox" name="asignatura" value="Entornos de Desarrollo">Entornos de Desarrollo
  <input type="checkbox" name="asignatura" value="Lenguajes de Marcas">Lenguajes de Marcas
  <input type="checkbox" name="asignatura" value="Sistemas Informáticos">Sistemas Informáticos

  <label for="dias">Días con disponibilidad:</label>
  <input type="checkbox" id="lunes" name="dia" value="Lunes" checked>Lunes
  <input type="checkbox" id="martes" name="dia" value="Martes">Martes
  <input type="checkbox" id="miercoles" name="dia" value="Miércoles">Miércoles
  <input type="checkbox" id="jueves" name="dia" value="Jueves">Jueves
  <input type="checkbox" id="viernes" name="dia" value="Viernes">Viernes

  <label for="preferente">Preferente:</label>
  <input type="checkbox" id="preferente" name="preferente" value="Lunes" checked>Lunes

  <label for="mensaje">Mensaje:</label>
  <textarea id="mensaje" name="mensaje" maxlength="500"></textarea>
  <span id="mensajeCounter">500</span> caracteres restantes

  <button type="submit">Enviar</button>
</form>

<script>
document.getElementById("registroForm").onsubmit = function(event) {
  var errorMessage = '';
  var nifPattern = /\d{8}[A-Za-z]/;
  var nif = document.getElementById("nif").value;
  var mensajeLength = document.getElementById("mensaje").value.length;

  // Validación de NIF
  if (!nifPattern.test(nif)) {
    errorMessage += 'El NIF no es válido.\n';
  }

  // Validación de mensaje
  if (mensajeLength < 2 || mensajeLength > 500) {
    errorMessage += 'El mensaje debe tener entre 2 y 500 caracteres.\n';
  }

  // Validación de días
  var diasSeleccionados = document.querySelectorAll('input[name="dia"]:checked').length;
  if (diasSeleccionados < 2) {
    errorMessage += 'Debes seleccionar al menos dos días con disponibilidad.\n';
  }

  // Mostrar mensaje de error si hay alguno
  if (errorMessage !== '') {
    alert(errorMessage);
    event.preventDefault(); // Evitar el envío del formulario
  }
};
  
document.getElementById("mensaje").addEventListener("input", function() {
  var charCount = this.value.length;
  document.getElementById("mensajeCounter").textContent = 500 - charCount;
});
</script>

</body>
</html>
